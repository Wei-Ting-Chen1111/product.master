<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="cssforproduct.css">
    <link rel="stylesheet" href="model.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

    <title>product</title>
</head>
<body>
    <header class="header">
        <nav>
            <ul>
                <li style="width: 5%; margin-top: px;" >
                    <span style="cursor: pointer; font-size: 26px;" onclick="openNav()"> &#9776</span>
                  </li>
              <li style=" margin:0px auto; width: 85%;">
                
                <form action="/search" style="margin: 0 auto;">
                  <input
                    type="search"
                    class="searchBar"
                    name="product";
                    width="100%"
                  />
                  <select name="searchBy" class="searchBar">
                    <option value="title" class="searchBar">Product Title</option>
                    <option value="id" class="searchBar">Product ID</option>
                  </select>
    
                </form>
              </li>
              <li style="width: 3%; float: right; margin-right: 15px;">
                <a href="logout"><i class="fa fa-sign-out" style="font-size: 25px;"></i></a>
              </li>
              <li style="width: 3%; float: right; margin-right: 15px;" >
              <a href="cart"><i class="fa fa-shopping-cart" style="font-size: 25px;"></i></a>
            </li>
              
            </ul>
          </nav>
        </header>
      
          <div id="mySidenav" class="sidenav">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()"
              >&times;</a
            >
            <a href="index.html"> Home </a>
            <a href="dashboard"> Dashboard </a>
            <a href="product.html"> Product </a>
            <a href="invoice.html"> Invoice </a>
            <a href="vendor.html"> Vendor </a>
            <a href="purchaseOrder.html"> Purchase Order </a>
            <a href="tag">Create Tags</a>
            <a href="vendorPage">Create Vendor</a>
            
            <a href="upload.html">Upload </a>
            
          </div>

      

    <% for(product of data){ %>
        <div class="product">
            <div class="vital">
                
            <img src="<%= product.image_url %>" alt="productImage"><br>
            
                <p>Vendor: <%= product.vendorName %> </p><br>
                <p>Model No: <%= product.modelNO%></p><br>
                <p>Title: <%= product.title %> </p><br>
                <p class="product_id">ID: <%= product.id %> </p><br>
                <p>Package No: <%= product.packageNo %> </p><br>
                <p>Vendor Price: $<%= product.vendorPrice %> </p><br>
                <p>Actual Cost: $<%= Math.round(product.totalPurchaseAmount / product.totalPurchaseUnits)%> </p><br>
                <p id="<%=product.id%>Breakeven">Breakeven Price: $<%= Math.round(product.totalPurchaseAmount / product.totalPurchaseUnits)  +  product.packageCost%> </p><br>
                
                
                <button onclick="edit(this)" value="<%= product.id %>" >Edit Product Info</button><br>
            </div>
            
            <div class="detail">
                <p>Inventory: <%= product.inventory %> </p>
                <button onclick="get(this)" value="<%= product.id %>" id="getBtn<%= product.id %> " style="border:0;background-color: #4980Ef; color: white; height: 25px; border-radius: 5px;">Incoming <%= product.incoming %></button>
                <button onclick="show(this)" style="border:0;background-color: #4980DE; color: white; height: 25px; border-radius: 5px;" value="<%= product.id %>" id="showBtn<%= product.id %>" hidden> Incoming <%= product.incoming %></button>
                <br>
                <form style="display: inline-table" onsubmit="return false">
                    <input type="hidden" name="product_id" value="<%= product.id %>">
                    <label for="sellPrice">Price: </label>
                    <input type="number" style="width: 60px" name="sellPrice" value="<%= product.sellPrice %>" >
                    <button type="button" onclick="setPrice(this)"> Set </button> 
                </form><br>
                <p class="hovertext" data-hover="Profit">($<%= (product.sellPrice) - Math.round((product.totalPurchaseAmount / product.totalPurchaseUnits)  +  product.packageCost ) %>|</p>
                <p class="hovertext" data-hover="Margin"><%= Math.round((product.sellPrice - (product.totalPurchaseAmount / product.totalPurchaseUnits)  -  product.packageCost) / product.sellPrice * 100) %>%|</p>
                <p class="hovertext" data-hover="ROI"> <%= Math.round((product.sellPrice - (product.totalPurchaseAmount / product.totalPurchaseUnits)  -  product.packageCost) / ((product.totalPurchaseAmount / product.totalPurchaseUnits)  +  product.packageCost) * 100) %>%)</p><br>
                <p>Total Purchase: <%= product.totalPurchaseUnits %>
                    <p class="hovertext" data-hover="Purchase Amount">($<%= product.totalPurchaseAmount %>)</p>
                </p><br>
                <p>Total Sold Units: <%= product.totalSoldUnits %> </p><br>
                <p>TTM GMS: $<%= product.GMS %></p><br>

                    <p class="hovertext" data-hover="AVG Sold Price">($<%= Math.round(product.avgPrice) %>|</p> 
                    <p class="hovertext" data-hover="Margin"><%= Math.round((product.avgPrice - (product.totalPurchaseAmount / product.totalPurchaseUnits)  -  product.packageCost) / product.avgPrice * 100) %>%|</p> 
                    <p class="hovertext" data-hover="ROI"><%= Math.round((product.avgPrice - (product.totalPurchaseAmount / product.totalPurchaseUnits)  -  product.packageCost) / ((product.totalPurchaseAmount / product.totalPurchaseUnits)  +  product.packageCost) * 100) %>%)</p><br>
                
                <p>Life Time Profit : $<%= (product.GMS)-(product.totalPurchaseAmount) %> </p><br>

            <div class="cart">
                <p>Cart1: <p id="<%= product.id %>cart1"><%= product.cart1 %></p> Units </p><br>
                <p>Cart2: <p id="<%= product.id %>cart2"><%= product.cart2 %></p> Units </p><br>
                <p>Cart3: <p id="<%= product.id %>cart3"><%= product.cart3 %></p> Units </p><br>
                <form style="display: inline-table" onsubmit="return false">
                    <input class="id" type="hidden" name="id" value="<%= product.id%>">
                    <input type="hidden" name="cart" value="cart1">
                    <input class="quantity" type="number" id="quantity" name="quantity" style="width: 60px">
                    <button class="button" type="button" value="Add" onclick="add(this)" style="margin-left: 5px;"> Add To Cart 1</button>
                </form><br>
                <form style="display: inline-table" onsubmit="return false">
                    <input class="id" type="hidden" name="id" value="<%= product.id%>">
                    <input type="hidden" name="cart" value="cart2">
                    <input class="quantity" type="number" id="quantity2" name="quantity" style="width: 60px">
                    <button class="button" type="button" value="Add" onclick="add(this)" style="margin-left: 5px;"> Add To Cart 2</button>
                </form><br>
                <form style="display: inline-table" onsubmit="return false">
                    <input class="id" type="hidden" name="id" value="<%= product.id%>">
                    <input type="hidden" name="cart" value="cart3">
                    <input class="quantity" type="number" id="quantity3" name="quantity" style="width: 60px">
                    <button class="button" type="button" value="Add" onclick="add(this)" style="margin-left: 5px;"> Add To Cart 3</button><br>
                </form><br>
                <button class="chartBtn" type="button" value="<%= product.id %>" onclick="chart(this)" style="display: none;"> This Year Sales Performance</button><br>

                
            </div> 
            
            </div>
            
            <div class="chart">
                <canvas class="salesChart" id="<%= product.id %>thisYear" style="width: 100%; height:80%; display: inline; margin-right: 30px;"></canvas>
            </div>
            
             <div class="tag">
            <button onclick="removeTag(this)" class="tag<%= product.id %>" id="tag1<%= product.id%>"><%=product.tag1%></button>
            <button onclick="removeTag(this)" class="tag<%= product.id %>" id="tag2<%= product.id
             %>"><%=product.tag2%></button>
            <button onclick="removeTag(this)" class="tag<%= product.id %>" id="tag3<%= product.id
             %>"><%=product.tag3%></button>
            <button onclick="removeTag(this)" class="tag<%= product.id %>" id="tag4<%= product.id
             %>"><%=product.tag4%></button>
            <button onclick="removeTag(this)" class="tag<%= product.id %>" id="tag5<%= product.id
             %>"><%=product.tag5%></button>
             <p id="tagMsg<%= product.id %>" style="display: none; color: red;">Maximum Count is 5, Please Remove Unwanted Tags Before Adding New Tag</p>

        </div>

            

            
            <div class="remark">
                <label for="tagOptions" style="margin-left: 5px;">Add Prodcut Tag:</label>
            <select name="tagOptions" id="tagOptions<%= product.id %>" class="tagOptions" style="width: 100px;">
            </select>
            <button value="<%= product.id %>" onclick="addTag(this)" class="createBtn"> Add</button><br>
                <form onsubmit="return false">
                    <label for="remark"> Remark:</label>
                    <input type="text" name="remark" style="width: 70%; margin-left: 10px;" value="<%= product.remark %>">
                    <button type="button" onclick="mark(this)" value="<%= product.id %>"> Save</button>
                </form>
            </div> 
        </div>
        
       
        
        
        

        <!-- The Incoming Modal -->
        <div id="myModal<%= product.id %>" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
            <span class="close" id="close<%= product.id%>">&times;</span>
            <table id="table<%= product.id %>">
                <tr>
                    <th>PO Number</th>
                    <th>Quantity</th>
                    <th>ETA</th>
                </tr>
            </table>
        </div>
  
        </div>

        <!-- The Update Modal -->
        <div id="update<%= product.id %>" class="modal">
            <!-- Modal content -->
            <div class="modal-content" style="width: 17%;">
                <span class="close" id="close2<%= product.id%>">&times;</span>
                <form>
                    <label for="vendorPrice"> Vendor Price </label><br>
                    <input type="number" name="vendorPrice" value="<%= product.vendorPrice %>"><br>
                    <label for="packageNo">Package Number </label><br>
                    <input type="text" name="packageNo" value="<%= product.packageNo %>"><br>
                    <label for="packageCost">Package Cost</label><br>
                    <input type="number" name="packageCost" value="<%= product.packageCost %>"><br>
                    <button type="button" value="<%= product.id %>" onclick="change(this)"> Change</button>
                </form>
            </div>
      
            </div>
           



   <% } %> 

<script src="/script/product.js"></script>
   <script src="/script/navBar.js"></script>
</body>
</html>
